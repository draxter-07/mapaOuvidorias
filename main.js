let countries = [["Abecásia", "29.7%", "56.2%"],
                ["Afeganistão", "35.2%", "64.2%"],
                ["África do Sul", "72%", "51.5%"],
                ["Albânia", "31%", "50%"],
                ["Alemanha", "25.5%", "47.2%"],
                ["Andorra", "30.2%", "44.5%"],
                ["Angola", "62%", "49.4%"],
                ["Antígua e Barbuda", "45%", "25%"],
                ["Arábia Saudita", "41%", "58%"],
                ["Argélia", "38.5%", "45%"],
                ["Argentina", "74%", "24.5%"],
                ["Armênia", "31.5%", "57.5%"],
                ["Austrália", "69%", "86.5%"],
                ["Áustria", "27.2%", "48.5%"],
                ["Azerbaijão", "31.5%", "58.3%"],
                ["Bahamas", "40.5%", "19.4%"],
                ["Bahrain", "39.5%" ,"60%"],
                ["Bangladesh", "41%", "72.5%"],
                ["Barbados", "48%", "25.5%"],
                ["Bélgica", "25.7%" ,"45.6%"],
                ["Belize", "44.8%" ,"15.8%"],
                ["Benim", "48.6%", "44.7%"],
                ["Bielorrússia", "23.9%", "52%"],
                ["Bolívia", "64.7%", "23.3%"],
                ["Bósnia e Herzegovina", "29.3%", "49.4%"],
                ["Botswana", "67.3%", "51.5%"],
                ["Brasil", "62%", "28%"],
                ["Brunei", "52%", "80.9%"],
                ["Bulgária", "30.1%", "51.5%"],
                ["Burkina Faso", "47.3%", "43.5%"],
                ["Burundi", "56.3%", "53.6%"],
                ["Butão", "38.8%", "72.3%"],
                ["Cabo Verde", "45.5%", "36.5%"],
                ["Camarões", "52%", "47.8%"],
                ["Camboja", "47.5%", "77.6%"],
                ["Canadá", "21%", "16%"],
                ["Catar", "40.5%", "60.2%"],
                ["Cazaquistão", "27%", "64%"],
                ["Chade", "46%", "49.9%"],
                ["Chile", "75%", "22.2%"],
                ["China", "34.5%", "75%"],
                ["Chipre", "34.6%", "54.2%"],
                ["Colômbia", "52.5%", "20.1%"],
                ["Comores", "61%", "58.5%"],
                ["Congo", "54.5%", "49%"],
                ["Coreia do Norte", "31.5%", "82%"],
                ["Coreia do Sul", "33.5%", "82.9%"],
                ["Costa do Marfim", "50%", "42.1%"],
                ["Costa Rica", "49%", "16.7%"],
                ["Croácia", "28.5%", "48.8%"],
                ["Cuba", "42.2%", "19%"],
                ["Dinamarca", "22.8%", "46.9%"],
                ["Djibuti", "48%", "57.7%"],
                ["Dominica", "46.2%", "25.5%"],
                ["Egito", "39.2%", "53%"],
                ["El Salvador", "46.8%", "15.3%"],
                ["Emirados Árabes Unidos", "40.8%", "61%"],
                ["Equador", "55.5%", "18.5%"],
                ["Eritreia", "45.4%", "56.2%"],
                ["Escócia", "22.5%", "43.4%"],
                ["Eslováquia", "26.7%", "49.6%"],
                ["Eslovênia", "28%", "48.2%"],
                ["Espanha", "31.5%", "43.1%"],
                ["Estados Unidos da América", "32%", "14%"],
                ["Estados Federados da Micronésia", "48%", "92%"],
                ["Estônia", "21%", "51%"],
                ["Eswatini", "70%", "53.8%"],
                ["Etiópia", "49.6%", "56.7%"],
                ["Fiji", "67%", "96%"],
                ["Finlândia", "19%", "51.1%"],
                ["França", "28%", "45%"],
                ["Gabão", "54.9%", "47.7%"],
                ["Gâmbia", "46.8%", "38.9%"],
                ["Gana", "50.4%", "43.4%"],
                ["Geórgia", "30.3%", "57%"],
                ["Granada", "33%", "43.3%"],
                ["Grécia", "33%", "50.7%"],
                ["Guatemala", "45.5%", "15%"],
                ["Guiana", "51.5%", "24.8%"],
                ["Guiné", "48.3%", "40.5%"],
                ["Guiné-Bissau", "47.5%", "38.7%"],
                ["Guiné-Equatorial", "53.7%", "47.3%"],
                ["Haiti", "43.7%", "20.6%"],
                ["Holanda", "24.7%", "45.8%"],
                ["Honduras", "46%", "16.2%"],
                ["Hungria", "27.6%", "49.8%"],
                ["Iêmen", "46%", "58%"],
                ["Índia", "42%", "69%"],
                ["Indonésia", "55%", "80.5%"],
                ["Inglaterra", "24.6%", "43.9%"],
                ["Irã", "36%", "61%"],
                ["Iraque", "35.3%", "57.3%"],
                ["Irlanda", "24.6%", "42%"],
                ["Irlanda do Norte", "23.7%", "42.3%"],
                ["Islândia", "18%", "40%"],
                ["Israel", "36%", "55%"],
                ["Itália", "30%", "47.8%"],
                ["Jamaica", "44.5%", "19.5%"],
                ["Japão", "33.3%", "86.3%"],
                ["Jordânia", "36.5%", "56%"],
                ["Kiribati", "55%", "97%"],
                ["Kosovo", "30.2%", "50.5%"],
                ["Kuwait", "37.5%", "59%"],
                ["Laos", "42.2%", "77.3%"],
                ["Macedônia do Norte", "31.2%", "50.8%"],
                ["Madagascar", "66%", "58.7%"],
                ["Malásia", "52.4%", "77%"],
                ["Malawi", "62.5%", "54.8%"],
                ["Maldivas", "52.5%", "67.5%"],
                ["Mali", "44%", "43.3%"],
                ["Malta", "34%", "48.5%"],
                ["Marrocos", "36%", "42%"],
                ["Marshall", "45%", "99%"],
                ["Maurícia", "66.5%", "61.5%"],
                ["Mauritânia", "42.5%", "40.3%"],
                ["México", "42%", "11.7%"],
                ["Mianmar", "42%", "74.5%"],
                ["Moçambique", "65%", "55%"],
                ["Moldávia", "27.3%", "52.4%"],
                ["Mônaco", "29.7%", "46%"],
                ["Mongólia", "27.9%", "74%"],
                ["Montenegro", "29.5%", "50.1%"],
                ["Noruega", "20%", "46.5%"],
                ["Nova Zelândia", "72%", "94%"],
                ["Polônia", "24.7%", "49.5%"],
                ["Portugal", "32%", "41.6%"],
                ["Suécia", "20.5%", "48.3%"]
                ]
let earth = document.getElementById("earthTerrain")
for(let i = 0; i < countries.length; i++){
    let c = countries[i];
    earth.innerHTML += `<div 
                        class="pin" 
                        style="top: ${c[1]}; left: ${c[2]}"
                        title="${c[0]}"
                        onclick="moveToCountry(event)">
                        </div>`
}

let input = document.getElementById("search");
input.addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    moveToCountry({target: {title: input.value}})
  }
});

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function moveToCountry(e){
    let divToGo = document.getElementById(e.target.title);
    divToGo.scrollIntoView({behavior: "smooth"})
    openCountryContent(e.target.title)
    await sleep(200)
    divToGo.style.border = "3px solid rgb(255, 150, 0)";
    await sleep(1000)
    divToGo.style.border = "3px solid rgb(255, 255, 255)";
}

function openCountryContent(id){
    let divToOpen = document.getElementById(id)
    let nowMaxHeight = divToOpen.style.maxHeight
    if (nowMaxHeight == "" || nowMaxHeight == "50px"){
        divToOpen.style.overflowY = "scroll";
        divToOpen.style.maxHeight = "300px";
    }
    else{
        divToOpen.style.maxHeight = "50px";
        divToOpen.style.overflowY = "hidden";
    }
}